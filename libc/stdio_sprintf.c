/*
 * Phoenix-RTOS
 *
 * libc-tests
 *
 * libphoenix sprintf formatting tests
 *
 * Copyright 2023 Phoenix Systems
 * Author: Andrzej Stalke
 *
 * This file is part of Phoenix-RTOS.
 *
 * %LICENSE%
 */

#include <stdio.h>
#include <string.h>
#include <stdint.h>
#include <stddef.h>

#include <unity_fixture.h>

#define inf INFINITY
#define nan NAN
#define INF INFINITY

#define BUFFER_SIZE 4096
static char buffer[BUFFER_SIZE];
static char message[BUFFER_SIZE];
#define MY_RUN_TEST(format, value, result, testid) \
	do { \
		sprintf(buffer, format, value); \
		sprintf(message, " Test: %zu (format %s)", testid, format); \
		TEST_ASSERT_EQUAL_STRING_MESSAGE(result, buffer, message); \
	} while (0);

struct test_double {
	size_t id;
	const char *format;
	double value;
	const char *result;
};

static const struct test_double test_f[] = {
	{ 0, "%.0f", 9.99936943633530694875e-01, "1" },
	{ 1, "% .0f", 9.99936943633530694875e-01, " 1" },
	{ 2, "%+.0f", 9.99936943633530694875e-01, "+1" },
	{ 3, "%#.0f", 9.99936943633530694875e-01, "1." },
	{ 4, "%-.0f", 9.99936943633530694875e-01, "1" },
	{ 5, "%0.0f", 9.99936943633530694875e-01, "1" },
	{ 6, "%.1f", 9.99936943633530694875e-01, "1.0" },
	{ 7, "% .1f", 9.99936943633530694875e-01, " 1.0" },
	{ 8, "%+.1f", 9.99936943633530694875e-01, "+1.0" },
	{ 9, "%#.1f", 9.99936943633530694875e-01, "1.0" },
	{ 10, "%-.1f", 9.99936943633530694875e-01, "1.0" },
	{ 11, "%0.1f", 9.99936943633530694875e-01, "1.0" },
	{ 12, "%.6f", 9.99936943633530694875e-01, "0.999937" },
	{ 13, "% .6f", 9.99936943633530694875e-01, " 0.999937" },
	{ 14, "%+.6f", 9.99936943633530694875e-01, "+0.999937" },
	{ 15, "%#.6f", 9.99936943633530694875e-01, "0.999937" },
	{ 16, "%-.6f", 9.99936943633530694875e-01, "0.999937" },
	{ 17, "%0.6f", 9.99936943633530694875e-01, "0.999937" },
	{ 18, "%.400f", 9.99936943633530694875e-01, "0.9999369436335306948748780087043996900320053100585937500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 19, "% .400f", 9.99936943633530694875e-01, " 0.9999369436335306948748780087043996900320053100585937500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 20, "%+.400f", 9.99936943633530694875e-01, "+0.9999369436335306948748780087043996900320053100585937500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 21, "%#.400f", 9.99936943633530694875e-01, "0.9999369436335306948748780087043996900320053100585937500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 22, "%-.400f", 9.99936943633530694875e-01, "0.9999369436335306948748780087043996900320053100585937500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 23, "%0.400f", 9.99936943633530694875e-01, "0.9999369436335306948748780087043996900320053100585937500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 24, "%.0f", -7.76639933231677154213e-02, "-0" },
	{ 25, "% .0f", -7.76639933231677154213e-02, "-0" },
	{ 26, "%+.0f", -7.76639933231677154213e-02, "-0" },
	{ 27, "%#.0f", -7.76639933231677154213e-02, "-0." },
	{ 28, "%-.0f", -7.76639933231677154213e-02, "-0" },
	{ 29, "%0.0f", -7.76639933231677154213e-02, "-0" },
	{ 30, "%.1f", -7.76639933231677154213e-02, "-0.1" },
	{ 31, "% .1f", -7.76639933231677154213e-02, "-0.1" },
	{ 32, "%+.1f", -7.76639933231677154213e-02, "-0.1" },
	{ 33, "%#.1f", -7.76639933231677154213e-02, "-0.1" },
	{ 34, "%-.1f", -7.76639933231677154213e-02, "-0.1" },
	{ 35, "%0.1f", -7.76639933231677154213e-02, "-0.1" },
	{ 36, "%.6f", -7.76639933231677154213e-02, "-0.077664" },
	{ 37, "% .6f", -7.76639933231677154213e-02, "-0.077664" },
	{ 38, "%+.6f", -7.76639933231677154213e-02, "-0.077664" },
	{ 39, "%#.6f", -7.76639933231677154213e-02, "-0.077664" },
	{ 40, "%-.6f", -7.76639933231677154213e-02, "-0.077664" },
	{ 41, "%0.6f", -7.76639933231677154213e-02, "-0.077664" },
	{ 42, "%.400f", -7.76639933231677154213e-02, "-0.0776639933231677154212846403424919117242097854614257812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 43, "% .400f", -7.76639933231677154213e-02, "-0.0776639933231677154212846403424919117242097854614257812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 44, "%+.400f", -7.76639933231677154213e-02, "-0.0776639933231677154212846403424919117242097854614257812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 45, "%#.400f", -7.76639933231677154213e-02, "-0.0776639933231677154212846403424919117242097854614257812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 46, "%-.400f", -7.76639933231677154213e-02, "-0.0776639933231677154212846403424919117242097854614257812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 47, "%0.400f", -7.76639933231677154213e-02, "-0.0776639933231677154212846403424919117242097854614257812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 48, "%.0f", 2.13683391826339130356e-320, "0" },
	{ 49, "% .0f", 2.13683391826339130356e-320, " 0" },
	{ 50, "%+.0f", 2.13683391826339130356e-320, "+0" },
	{ 51, "%#.0f", 2.13683391826339130356e-320, "0." },
	{ 52, "%-.0f", 2.13683391826339130356e-320, "0" },
	{ 53, "%0.0f", 2.13683391826339130356e-320, "0" },
	{ 54, "%.1f", 2.13683391826339130356e-320, "0.0" },
	{ 55, "% .1f", 2.13683391826339130356e-320, " 0.0" },
	{ 56, "%+.1f", 2.13683391826339130356e-320, "+0.0" },
	{ 57, "%#.1f", 2.13683391826339130356e-320, "0.0" },
	{ 58, "%-.1f", 2.13683391826339130356e-320, "0.0" },
	{ 59, "%0.1f", 2.13683391826339130356e-320, "0.0" },
	{ 60, "%.6f", 2.13683391826339130356e-320, "0.000000" },
	{ 61, "% .6f", 2.13683391826339130356e-320, " 0.000000" },
	{ 62, "%+.6f", 2.13683391826339130356e-320, "+0.000000" },
	{ 63, "%#.6f", 2.13683391826339130356e-320, "0.000000" },
	{ 64, "%-.6f", 2.13683391826339130356e-320, "0.000000" },
	{ 65, "%0.6f", 2.13683391826339130356e-320, "0.000000" },
	{ 66, "%.400f", 2.13683391826339130356e-320, "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000213683391826339130356366002915505743547888364630695460614065807681542156894365285" },
	{ 67, "% .400f", 2.13683391826339130356e-320, " 0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000213683391826339130356366002915505743547888364630695460614065807681542156894365285" },
	{ 68, "%+.400f", 2.13683391826339130356e-320, "+0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000213683391826339130356366002915505743547888364630695460614065807681542156894365285" },
	{ 69, "%#.400f", 2.13683391826339130356e-320, "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000213683391826339130356366002915505743547888364630695460614065807681542156894365285" },
	{ 70, "%-.400f", 2.13683391826339130356e-320, "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000213683391826339130356366002915505743547888364630695460614065807681542156894365285" },
	{ 71, "%0.400f", 2.13683391826339130356e-320, "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000213683391826339130356366002915505743547888364630695460614065807681542156894365285" },
	{ 72, "%.0f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 73, "% .0f", 2.13700000000000002001e+300, " 2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 74, "%+.0f", 2.13700000000000002001e+300, "+2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 75, "%#.0f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904." },
	{ 76, "%-.0f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 77, "%0.0f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 78, "%.1f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0" },
	{ 79, "% .1f", 2.13700000000000002001e+300, " 2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0" },
	{ 80, "%+.1f", 2.13700000000000002001e+300, "+2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0" },
	{ 81, "%#.1f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0" },
	{ 82, "%-.1f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0" },
	{ 83, "%0.1f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0" },
	{ 84, "%.6f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.000000" },
	{ 85, "% .6f", 2.13700000000000002001e+300, " 2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.000000" },
	{ 86, "%+.6f", 2.13700000000000002001e+300, "+2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.000000" },
	{ 87, "%#.6f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.000000" },
	{ 88, "%-.6f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.000000" },
	{ 89, "%0.6f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.000000" },
	{ 90, "%.400f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 91, "% .400f", 2.13700000000000002001e+300, " 2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 92, "%+.400f", 2.13700000000000002001e+300, "+2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 93, "%#.400f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 94, "%-.400f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 95, "%0.400f", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 96, "%.0f", -inf, "-inf" },
	{ 97, "% .0f", -inf, "-inf" },
	{ 98, "%+.0f", -inf, "-inf" },
	{ 99, "%#.0f", -inf, "-inf" },
	{ 100, "%-.0f", -inf, "-inf" },
	{ 101, "%0.0f", -inf, "-inf" },
	{ 102, "%.1f", -inf, "-inf" },
	{ 103, "% .1f", -inf, "-inf" },
	{ 104, "%+.1f", -inf, "-inf" },
	{ 105, "%#.1f", -inf, "-inf" },
	{ 106, "%-.1f", -inf, "-inf" },
	{ 107, "%0.1f", -inf, "-inf" },
	{ 108, "%.6f", -inf, "-inf" },
	{ 109, "% .6f", -inf, "-inf" },
	{ 110, "%+.6f", -inf, "-inf" },
	{ 111, "%#.6f", -inf, "-inf" },
	{ 112, "%-.6f", -inf, "-inf" },
	{ 113, "%0.6f", -inf, "-inf" },
	{ 114, "%.400f", -inf, "-inf" },
	{ 115, "% .400f", -inf, "-inf" },
	{ 116, "%+.400f", -inf, "-inf" },
	{ 117, "%#.400f", -inf, "-inf" },
	{ 118, "%-.400f", -inf, "-inf" },
	{ 119, "%0.400f", -inf, "-inf" },
	{ 120, "%.0f", -nan, "-nan" },
	{ 121, "% .0f", -nan, "-nan" },
	{ 122, "%+.0f", -nan, "-nan" },
	{ 123, "%#.0f", -nan, "-nan" },
	{ 124, "%-.0f", -nan, "-nan" },
	{ 125, "%0.0f", -nan, "-nan" },
	{ 126, "%.1f", -nan, "-nan" },
	{ 127, "% .1f", -nan, "-nan" },
	{ 128, "%+.1f", -nan, "-nan" },
	{ 129, "%#.1f", -nan, "-nan" },
	{ 130, "%-.1f", -nan, "-nan" },
	{ 131, "%0.1f", -nan, "-nan" },
	{ 132, "%.6f", -nan, "-nan" },
	{ 133, "% .6f", -nan, "-nan" },
	{ 134, "%+.6f", -nan, "-nan" },
	{ 135, "%#.6f", -nan, "-nan" },
	{ 136, "%-.6f", -nan, "-nan" },
	{ 137, "%0.6f", -nan, "-nan" },
	{ 138, "%.400f", -nan, "-nan" },
	{ 139, "% .400f", -nan, "-nan" },
	{ 140, "%+.400f", -nan, "-nan" },
	{ 141, "%#.400f", -nan, "-nan" },
	{ 142, "%-.400f", -nan, "-nan" },
	{ 143, "%0.400f", -nan, "-nan" },
	{ 144, "%.0f", -0.00000000000000000000e+00, "-0" },
	{ 145, "% .0f", -0.00000000000000000000e+00, "-0" },
	{ 146, "%+.0f", -0.00000000000000000000e+00, "-0" },
	{ 147, "%#.0f", -0.00000000000000000000e+00, "-0." },
	{ 148, "%-.0f", -0.00000000000000000000e+00, "-0" },
	{ 149, "%0.0f", -0.00000000000000000000e+00, "-0" },
	{ 150, "%.1f", -0.00000000000000000000e+00, "-0.0" },
	{ 151, "% .1f", -0.00000000000000000000e+00, "-0.0" },
	{ 152, "%+.1f", -0.00000000000000000000e+00, "-0.0" },
	{ 153, "%#.1f", -0.00000000000000000000e+00, "-0.0" },
	{ 154, "%-.1f", -0.00000000000000000000e+00, "-0.0" },
	{ 155, "%0.1f", -0.00000000000000000000e+00, "-0.0" },
	{ 156, "%.6f", -0.00000000000000000000e+00, "-0.000000" },
	{ 157, "% .6f", -0.00000000000000000000e+00, "-0.000000" },
	{ 158, "%+.6f", -0.00000000000000000000e+00, "-0.000000" },
	{ 159, "%#.6f", -0.00000000000000000000e+00, "-0.000000" },
	{ 160, "%-.6f", -0.00000000000000000000e+00, "-0.000000" },
	{ 161, "%0.6f", -0.00000000000000000000e+00, "-0.000000" },
	{ 162, "%.400f", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 163, "% .400f", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 164, "%+.400f", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 165, "%#.400f", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 166, "%-.400f", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 167, "%0.400f", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
};
static const struct test_double test_e[] = {
	{ 0, "%.0e", 9.99936943633530694875e-01, "1e+00" },
	{ 1, "% .0e", 9.99936943633530694875e-01, " 1e+00" },
	{ 2, "%+.0e", 9.99936943633530694875e-01, "+1e+00" },
	{ 3, "%#.0e", 9.99936943633530694875e-01, "1.e+00" },
	{ 4, "%-.0e", 9.99936943633530694875e-01, "1e+00" },
	{ 5, "%0.0e", 9.99936943633530694875e-01, "1e+00" },
	{ 6, "%.1e", 9.99936943633530694875e-01, "1.0e+00" },
	{ 7, "% .1e", 9.99936943633530694875e-01, " 1.0e+00" },
	{ 8, "%+.1e", 9.99936943633530694875e-01, "+1.0e+00" },
	{ 9, "%#.1e", 9.99936943633530694875e-01, "1.0e+00" },
	{ 10, "%-.1e", 9.99936943633530694875e-01, "1.0e+00" },
	{ 11, "%0.1e", 9.99936943633530694875e-01, "1.0e+00" },
	{ 12, "%.6e", 9.99936943633530694875e-01, "9.999369e-01" },
	{ 13, "% .6e", 9.99936943633530694875e-01, " 9.999369e-01" },
	{ 14, "%+.6e", 9.99936943633530694875e-01, "+9.999369e-01" },
	{ 15, "%#.6e", 9.99936943633530694875e-01, "9.999369e-01" },
	{ 16, "%-.6e", 9.99936943633530694875e-01, "9.999369e-01" },
	{ 17, "%0.6e", 9.99936943633530694875e-01, "9.999369e-01" },
	{ 18, "%.400e", 9.99936943633530694875e-01, "9.9993694363353069487487800870439969003200531005859375000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-01" },
	{ 19, "% .400e", 9.99936943633530694875e-01, " 9.9993694363353069487487800870439969003200531005859375000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-01" },
	{ 20, "%+.400e", 9.99936943633530694875e-01, "+9.9993694363353069487487800870439969003200531005859375000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-01" },
	{ 21, "%#.400e", 9.99936943633530694875e-01, "9.9993694363353069487487800870439969003200531005859375000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-01" },
	{ 22, "%-.400e", 9.99936943633530694875e-01, "9.9993694363353069487487800870439969003200531005859375000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-01" },
	{ 23, "%0.400e", 9.99936943633530694875e-01, "9.9993694363353069487487800870439969003200531005859375000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-01" },
	{ 24, "%.0e", -7.76639933231677154213e-02, "-8e-02" },
	{ 25, "% .0e", -7.76639933231677154213e-02, "-8e-02" },
	{ 26, "%+.0e", -7.76639933231677154213e-02, "-8e-02" },
	{ 27, "%#.0e", -7.76639933231677154213e-02, "-8.e-02" },
	{ 28, "%-.0e", -7.76639933231677154213e-02, "-8e-02" },
	{ 29, "%0.0e", -7.76639933231677154213e-02, "-8e-02" },
	{ 30, "%.1e", -7.76639933231677154213e-02, "-7.8e-02" },
	{ 31, "% .1e", -7.76639933231677154213e-02, "-7.8e-02" },
	{ 32, "%+.1e", -7.76639933231677154213e-02, "-7.8e-02" },
	{ 33, "%#.1e", -7.76639933231677154213e-02, "-7.8e-02" },
	{ 34, "%-.1e", -7.76639933231677154213e-02, "-7.8e-02" },
	{ 35, "%0.1e", -7.76639933231677154213e-02, "-7.8e-02" },
	{ 36, "%.6e", -7.76639933231677154213e-02, "-7.766399e-02" },
	{ 37, "% .6e", -7.76639933231677154213e-02, "-7.766399e-02" },
	{ 38, "%+.6e", -7.76639933231677154213e-02, "-7.766399e-02" },
	{ 39, "%#.6e", -7.76639933231677154213e-02, "-7.766399e-02" },
	{ 40, "%-.6e", -7.76639933231677154213e-02, "-7.766399e-02" },
	{ 41, "%0.6e", -7.76639933231677154213e-02, "-7.766399e-02" },
	{ 42, "%.400e", -7.76639933231677154213e-02, "-7.7663993323167715421284640342491911724209785461425781250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-02" },
	{ 43, "% .400e", -7.76639933231677154213e-02, "-7.7663993323167715421284640342491911724209785461425781250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-02" },
	{ 44, "%+.400e", -7.76639933231677154213e-02, "-7.7663993323167715421284640342491911724209785461425781250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-02" },
	{ 45, "%#.400e", -7.76639933231677154213e-02, "-7.7663993323167715421284640342491911724209785461425781250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-02" },
	{ 46, "%-.400e", -7.76639933231677154213e-02, "-7.7663993323167715421284640342491911724209785461425781250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-02" },
	{ 47, "%0.400e", -7.76639933231677154213e-02, "-7.7663993323167715421284640342491911724209785461425781250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-02" },
	{ 48, "%.0e", 2.13683391826339130356e-320, "2e-320" },
	{ 49, "% .0e", 2.13683391826339130356e-320, " 2e-320" },
	{ 50, "%+.0e", 2.13683391826339130356e-320, "+2e-320" },
	{ 51, "%#.0e", 2.13683391826339130356e-320, "2.e-320" },
	{ 52, "%-.0e", 2.13683391826339130356e-320, "2e-320" },
	{ 53, "%0.0e", 2.13683391826339130356e-320, "2e-320" },
	{ 54, "%.1e", 2.13683391826339130356e-320, "2.1e-320" },
	{ 55, "% .1e", 2.13683391826339130356e-320, " 2.1e-320" },
	{ 56, "%+.1e", 2.13683391826339130356e-320, "+2.1e-320" },
	{ 57, "%#.1e", 2.13683391826339130356e-320, "2.1e-320" },
	{ 58, "%-.1e", 2.13683391826339130356e-320, "2.1e-320" },
	{ 59, "%0.1e", 2.13683391826339130356e-320, "2.1e-320" },
	{ 60, "%.6e", 2.13683391826339130356e-320, "2.136834e-320" },
	{ 61, "% .6e", 2.13683391826339130356e-320, " 2.136834e-320" },
	{ 62, "%+.6e", 2.13683391826339130356e-320, "+2.136834e-320" },
	{ 63, "%#.6e", 2.13683391826339130356e-320, "2.136834e-320" },
	{ 64, "%-.6e", 2.13683391826339130356e-320, "2.136834e-320" },
	{ 65, "%0.6e", 2.13683391826339130356e-320, "2.136834e-320" },
	{ 66, "%.400e", 2.13683391826339130356e-320, "2.1368339182633913035636600291550574354788836463069546061406580768154215689436528518174217922640756670426201423078027291862577902722894396194247009927466316228962505845480968245829331592509468475984537081009465195103771912776255445891685574751264474432064585854806371690418466705959817961818146902982576702724089460983434528306632996332048692992460995545348763515609957480188558541942728016363785695747e-320" },
	{ 67, "% .400e", 2.13683391826339130356e-320, " 2.1368339182633913035636600291550574354788836463069546061406580768154215689436528518174217922640756670426201423078027291862577902722894396194247009927466316228962505845480968245829331592509468475984537081009465195103771912776255445891685574751264474432064585854806371690418466705959817961818146902982576702724089460983434528306632996332048692992460995545348763515609957480188558541942728016363785695747e-320" },
	{ 68, "%+.400e", 2.13683391826339130356e-320, "+2.1368339182633913035636600291550574354788836463069546061406580768154215689436528518174217922640756670426201423078027291862577902722894396194247009927466316228962505845480968245829331592509468475984537081009465195103771912776255445891685574751264474432064585854806371690418466705959817961818146902982576702724089460983434528306632996332048692992460995545348763515609957480188558541942728016363785695747e-320" },
	{ 69, "%#.400e", 2.13683391826339130356e-320, "2.1368339182633913035636600291550574354788836463069546061406580768154215689436528518174217922640756670426201423078027291862577902722894396194247009927466316228962505845480968245829331592509468475984537081009465195103771912776255445891685574751264474432064585854806371690418466705959817961818146902982576702724089460983434528306632996332048692992460995545348763515609957480188558541942728016363785695747e-320" },
	{ 70, "%-.400e", 2.13683391826339130356e-320, "2.1368339182633913035636600291550574354788836463069546061406580768154215689436528518174217922640756670426201423078027291862577902722894396194247009927466316228962505845480968245829331592509468475984537081009465195103771912776255445891685574751264474432064585854806371690418466705959817961818146902982576702724089460983434528306632996332048692992460995545348763515609957480188558541942728016363785695747e-320" },
	{ 71, "%0.400e", 2.13683391826339130356e-320, "2.1368339182633913035636600291550574354788836463069546061406580768154215689436528518174217922640756670426201423078027291862577902722894396194247009927466316228962505845480968245829331592509468475984537081009465195103771912776255445891685574751264474432064585854806371690418466705959817961818146902982576702724089460983434528306632996332048692992460995545348763515609957480188558541942728016363785695747e-320" },
	{ 72, "%.0e", 2.13700000000000002001e+300, "2e+300" },
	{ 73, "% .0e", 2.13700000000000002001e+300, " 2e+300" },
	{ 74, "%+.0e", 2.13700000000000002001e+300, "+2e+300" },
	{ 75, "%#.0e", 2.13700000000000002001e+300, "2.e+300" },
	{ 76, "%-.0e", 2.13700000000000002001e+300, "2e+300" },
	{ 77, "%0.0e", 2.13700000000000002001e+300, "2e+300" },
	{ 78, "%.1e", 2.13700000000000002001e+300, "2.1e+300" },
	{ 79, "% .1e", 2.13700000000000002001e+300, " 2.1e+300" },
	{ 80, "%+.1e", 2.13700000000000002001e+300, "+2.1e+300" },
	{ 81, "%#.1e", 2.13700000000000002001e+300, "2.1e+300" },
	{ 82, "%-.1e", 2.13700000000000002001e+300, "2.1e+300" },
	{ 83, "%0.1e", 2.13700000000000002001e+300, "2.1e+300" },
	{ 84, "%.6e", 2.13700000000000002001e+300, "2.137000e+300" },
	{ 85, "% .6e", 2.13700000000000002001e+300, " 2.137000e+300" },
	{ 86, "%+.6e", 2.13700000000000002001e+300, "+2.137000e+300" },
	{ 87, "%#.6e", 2.13700000000000002001e+300, "2.137000e+300" },
	{ 88, "%-.6e", 2.13700000000000002001e+300, "2.137000e+300" },
	{ 89, "%0.6e", 2.13700000000000002001e+300, "2.137000e+300" },
	{ 90, "%.400e", 2.13700000000000002001e+300, "2.1370000000000000200076243397492961780015744725343013859170477419662653912644415368071548846018459256609608977091791110966052971620009110119686356751050389393155074200316256940435511018769499640103140433366729135278082128804847417845191130848925990451757417300916603263982566475051610836580351124439040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+300" },
	{ 91, "% .400e", 2.13700000000000002001e+300, " 2.1370000000000000200076243397492961780015744725343013859170477419662653912644415368071548846018459256609608977091791110966052971620009110119686356751050389393155074200316256940435511018769499640103140433366729135278082128804847417845191130848925990451757417300916603263982566475051610836580351124439040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+300" },
	{ 92, "%+.400e", 2.13700000000000002001e+300, "+2.1370000000000000200076243397492961780015744725343013859170477419662653912644415368071548846018459256609608977091791110966052971620009110119686356751050389393155074200316256940435511018769499640103140433366729135278082128804847417845191130848925990451757417300916603263982566475051610836580351124439040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+300" },
	{ 93, "%#.400e", 2.13700000000000002001e+300, "2.1370000000000000200076243397492961780015744725343013859170477419662653912644415368071548846018459256609608977091791110966052971620009110119686356751050389393155074200316256940435511018769499640103140433366729135278082128804847417845191130848925990451757417300916603263982566475051610836580351124439040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+300" },
	{ 94, "%-.400e", 2.13700000000000002001e+300, "2.1370000000000000200076243397492961780015744725343013859170477419662653912644415368071548846018459256609608977091791110966052971620009110119686356751050389393155074200316256940435511018769499640103140433366729135278082128804847417845191130848925990451757417300916603263982566475051610836580351124439040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+300" },
	{ 95, "%0.400e", 2.13700000000000002001e+300, "2.1370000000000000200076243397492961780015744725343013859170477419662653912644415368071548846018459256609608977091791110966052971620009110119686356751050389393155074200316256940435511018769499640103140433366729135278082128804847417845191130848925990451757417300916603263982566475051610836580351124439040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+300" },
	{ 96, "%.0e", -inf, "-inf" },
	{ 97, "% .0e", -inf, "-inf" },
	{ 98, "%+.0e", -inf, "-inf" },
	{ 99, "%#.0e", -inf, "-inf" },
	{ 100, "%-.0e", -inf, "-inf" },
	{ 101, "%0.0e", -inf, "-inf" },
	{ 102, "%.1e", -inf, "-inf" },
	{ 103, "% .1e", -inf, "-inf" },
	{ 104, "%+.1e", -inf, "-inf" },
	{ 105, "%#.1e", -inf, "-inf" },
	{ 106, "%-.1e", -inf, "-inf" },
	{ 107, "%0.1e", -inf, "-inf" },
	{ 108, "%.6e", -inf, "-inf" },
	{ 109, "% .6e", -inf, "-inf" },
	{ 110, "%+.6e", -inf, "-inf" },
	{ 111, "%#.6e", -inf, "-inf" },
	{ 112, "%-.6e", -inf, "-inf" },
	{ 113, "%0.6e", -inf, "-inf" },
	{ 114, "%.400e", -inf, "-inf" },
	{ 115, "% .400e", -inf, "-inf" },
	{ 116, "%+.400e", -inf, "-inf" },
	{ 117, "%#.400e", -inf, "-inf" },
	{ 118, "%-.400e", -inf, "-inf" },
	{ 119, "%0.400e", -inf, "-inf" },
	{ 120, "%.0e", -nan, "-nan" },
	{ 121, "% .0e", -nan, "-nan" },
	{ 122, "%+.0e", -nan, "-nan" },
	{ 123, "%#.0e", -nan, "-nan" },
	{ 124, "%-.0e", -nan, "-nan" },
	{ 125, "%0.0e", -nan, "-nan" },
	{ 126, "%.1e", -nan, "-nan" },
	{ 127, "% .1e", -nan, "-nan" },
	{ 128, "%+.1e", -nan, "-nan" },
	{ 129, "%#.1e", -nan, "-nan" },
	{ 130, "%-.1e", -nan, "-nan" },
	{ 131, "%0.1e", -nan, "-nan" },
	{ 132, "%.6e", -nan, "-nan" },
	{ 133, "% .6e", -nan, "-nan" },
	{ 134, "%+.6e", -nan, "-nan" },
	{ 135, "%#.6e", -nan, "-nan" },
	{ 136, "%-.6e", -nan, "-nan" },
	{ 137, "%0.6e", -nan, "-nan" },
	{ 138, "%.400e", -nan, "-nan" },
	{ 139, "% .400e", -nan, "-nan" },
	{ 140, "%+.400e", -nan, "-nan" },
	{ 141, "%#.400e", -nan, "-nan" },
	{ 142, "%-.400e", -nan, "-nan" },
	{ 143, "%0.400e", -nan, "-nan" },
	{ 144, "%.0e", -0.00000000000000000000e+00, "-0e+00" },
	{ 145, "% .0e", -0.00000000000000000000e+00, "-0e+00" },
	{ 146, "%+.0e", -0.00000000000000000000e+00, "-0e+00" },
	{ 147, "%#.0e", -0.00000000000000000000e+00, "-0.e+00" },
	{ 148, "%-.0e", -0.00000000000000000000e+00, "-0e+00" },
	{ 149, "%0.0e", -0.00000000000000000000e+00, "-0e+00" },
	{ 150, "%.1e", -0.00000000000000000000e+00, "-0.0e+00" },
	{ 151, "% .1e", -0.00000000000000000000e+00, "-0.0e+00" },
	{ 152, "%+.1e", -0.00000000000000000000e+00, "-0.0e+00" },
	{ 153, "%#.1e", -0.00000000000000000000e+00, "-0.0e+00" },
	{ 154, "%-.1e", -0.00000000000000000000e+00, "-0.0e+00" },
	{ 155, "%0.1e", -0.00000000000000000000e+00, "-0.0e+00" },
	{ 156, "%.6e", -0.00000000000000000000e+00, "-0.000000e+00" },
	{ 157, "% .6e", -0.00000000000000000000e+00, "-0.000000e+00" },
	{ 158, "%+.6e", -0.00000000000000000000e+00, "-0.000000e+00" },
	{ 159, "%#.6e", -0.00000000000000000000e+00, "-0.000000e+00" },
	{ 160, "%-.6e", -0.00000000000000000000e+00, "-0.000000e+00" },
	{ 161, "%0.6e", -0.00000000000000000000e+00, "-0.000000e+00" },
	{ 162, "%.400e", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+00" },
	{ 163, "% .400e", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+00" },
	{ 164, "%+.400e", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+00" },
	{ 165, "%#.400e", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+00" },
	{ 166, "%-.400e", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+00" },
	{ 167, "%0.400e", -0.00000000000000000000e+00, "-0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e+00" },
};
static const struct test_double test_g[] = {
	{ 0, "%.0g", 9.99936943633530694875e-01, "1" },
	{ 1, "% .0g", 9.99936943633530694875e-01, " 1" },
	{ 2, "%+.0g", 9.99936943633530694875e-01, "+1" },
	{ 3, "%#.0g", 9.99936943633530694875e-01, "1." },
	{ 4, "%-.0g", 9.99936943633530694875e-01, "1" },
	{ 5, "%0.0g", 9.99936943633530694875e-01, "1" },
	{ 6, "%.1g", 9.99936943633530694875e-01, "1" },
	{ 7, "% .1g", 9.99936943633530694875e-01, " 1" },
	{ 8, "%+.1g", 9.99936943633530694875e-01, "+1" },
	{ 9, "%#.1g", 9.99936943633530694875e-01, "1." },
	{ 10, "%-.1g", 9.99936943633530694875e-01, "1" },
	{ 11, "%0.1g", 9.99936943633530694875e-01, "1" },
	{ 12, "%.6g", 9.99936943633530694875e-01, "0.999937" },
	{ 13, "% .6g", 9.99936943633530694875e-01, " 0.999937" },
	{ 14, "%+.6g", 9.99936943633530694875e-01, "+0.999937" },
	{ 15, "%#.6g", 9.99936943633530694875e-01, "0.999937" },
	{ 16, "%-.6g", 9.99936943633530694875e-01, "0.999937" },
	{ 17, "%0.6g", 9.99936943633530694875e-01, "0.999937" },
	{ 18, "%.400g", 9.99936943633530694875e-01, "0.99993694363353069487487800870439969003200531005859375" },
	{ 19, "% .400g", 9.99936943633530694875e-01, " 0.99993694363353069487487800870439969003200531005859375" },
	{ 20, "%+.400g", 9.99936943633530694875e-01, "+0.99993694363353069487487800870439969003200531005859375" },
	{ 21, "%#.400g", 9.99936943633530694875e-01, "0.9999369436335306948748780087043996900320053100585937500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 22, "%-.400g", 9.99936943633530694875e-01, "0.99993694363353069487487800870439969003200531005859375" },
	{ 23, "%0.400g", 9.99936943633530694875e-01, "0.99993694363353069487487800870439969003200531005859375" },
	{ 24, "%.0g", -7.76639933231677154213e-02, "-0.08" },
	{ 25, "% .0g", -7.76639933231677154213e-02, "-0.08" },
	{ 26, "%+.0g", -7.76639933231677154213e-02, "-0.08" },
	{ 27, "%#.0g", -7.76639933231677154213e-02, "-0.08" },
	{ 28, "%-.0g", -7.76639933231677154213e-02, "-0.08" },
	{ 29, "%0.0g", -7.76639933231677154213e-02, "-0.08" },
	{ 30, "%.1g", -7.76639933231677154213e-02, "-0.08" },
	{ 31, "% .1g", -7.76639933231677154213e-02, "-0.08" },
	{ 32, "%+.1g", -7.76639933231677154213e-02, "-0.08" },
	{ 33, "%#.1g", -7.76639933231677154213e-02, "-0.08" },
	{ 34, "%-.1g", -7.76639933231677154213e-02, "-0.08" },
	{ 35, "%0.1g", -7.76639933231677154213e-02, "-0.08" },
	{ 36, "%.6g", -7.76639933231677154213e-02, "-0.077664" },
	{ 37, "% .6g", -7.76639933231677154213e-02, "-0.077664" },
	{ 38, "%+.6g", -7.76639933231677154213e-02, "-0.077664" },
	{ 39, "%#.6g", -7.76639933231677154213e-02, "-0.0776640" },
	{ 40, "%-.6g", -7.76639933231677154213e-02, "-0.077664" },
	{ 41, "%0.6g", -7.76639933231677154213e-02, "-0.077664" },
	{ 42, "%.400g", -7.76639933231677154213e-02, "-0.07766399332316771542128464034249191172420978546142578125" },
	{ 43, "% .400g", -7.76639933231677154213e-02, "-0.07766399332316771542128464034249191172420978546142578125" },
	{ 44, "%+.400g", -7.76639933231677154213e-02, "-0.07766399332316771542128464034249191172420978546142578125" },
	{ 45, "%#.400g", -7.76639933231677154213e-02, "-0.07766399332316771542128464034249191172420978546142578125000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 46, "%-.400g", -7.76639933231677154213e-02, "-0.07766399332316771542128464034249191172420978546142578125" },
	{ 47, "%0.400g", -7.76639933231677154213e-02, "-0.07766399332316771542128464034249191172420978546142578125" },
	{ 48, "%.0g", 2.13683391826339130356e-320, "2e-320" },
	{ 49, "% .0g", 2.13683391826339130356e-320, " 2e-320" },
	{ 50, "%+.0g", 2.13683391826339130356e-320, "+2e-320" },
	{ 51, "%#.0g", 2.13683391826339130356e-320, "2.e-320" },
	{ 52, "%-.0g", 2.13683391826339130356e-320, "2e-320" },
	{ 53, "%0.0g", 2.13683391826339130356e-320, "2e-320" },
	{ 54, "%.1g", 2.13683391826339130356e-320, "2e-320" },
	{ 55, "% .1g", 2.13683391826339130356e-320, " 2e-320" },
	{ 56, "%+.1g", 2.13683391826339130356e-320, "+2e-320" },
	{ 57, "%#.1g", 2.13683391826339130356e-320, "2.e-320" },
	{ 58, "%-.1g", 2.13683391826339130356e-320, "2e-320" },
	{ 59, "%0.1g", 2.13683391826339130356e-320, "2e-320" },
	{ 60, "%.6g", 2.13683391826339130356e-320, "2.13683e-320" },
	{ 61, "% .6g", 2.13683391826339130356e-320, " 2.13683e-320" },
	{ 62, "%+.6g", 2.13683391826339130356e-320, "+2.13683e-320" },
	{ 63, "%#.6g", 2.13683391826339130356e-320, "2.13683e-320" },
	{ 64, "%-.6g", 2.13683391826339130356e-320, "2.13683e-320" },
	{ 65, "%0.6g", 2.13683391826339130356e-320, "2.13683e-320" },
	{ 66, "%.400g", 2.13683391826339130356e-320, "2.136833918263391303563660029155057435478883646306954606140658076815421568943652851817421792264075667042620142307802729186257790272289439619424700992746631622896250584548096824582933159250946847598453708100946519510377191277625544589168557475126447443206458585480637169041846670595981796181814690298257670272408946098343452830663299633204869299246099554534876351560995748018855854194272801636378569575e-320" },
	{ 67, "% .400g", 2.13683391826339130356e-320, " 2.136833918263391303563660029155057435478883646306954606140658076815421568943652851817421792264075667042620142307802729186257790272289439619424700992746631622896250584548096824582933159250946847598453708100946519510377191277625544589168557475126447443206458585480637169041846670595981796181814690298257670272408946098343452830663299633204869299246099554534876351560995748018855854194272801636378569575e-320" },
	{ 68, "%+.400g", 2.13683391826339130356e-320, "+2.136833918263391303563660029155057435478883646306954606140658076815421568943652851817421792264075667042620142307802729186257790272289439619424700992746631622896250584548096824582933159250946847598453708100946519510377191277625544589168557475126447443206458585480637169041846670595981796181814690298257670272408946098343452830663299633204869299246099554534876351560995748018855854194272801636378569575e-320" },
	{ 69, "%#.400g", 2.13683391826339130356e-320, "2.136833918263391303563660029155057435478883646306954606140658076815421568943652851817421792264075667042620142307802729186257790272289439619424700992746631622896250584548096824582933159250946847598453708100946519510377191277625544589168557475126447443206458585480637169041846670595981796181814690298257670272408946098343452830663299633204869299246099554534876351560995748018855854194272801636378569575e-320" },
	{ 70, "%-.400g", 2.13683391826339130356e-320, "2.136833918263391303563660029155057435478883646306954606140658076815421568943652851817421792264075667042620142307802729186257790272289439619424700992746631622896250584548096824582933159250946847598453708100946519510377191277625544589168557475126447443206458585480637169041846670595981796181814690298257670272408946098343452830663299633204869299246099554534876351560995748018855854194272801636378569575e-320" },
	{ 71, "%0.400g", 2.13683391826339130356e-320, "2.136833918263391303563660029155057435478883646306954606140658076815421568943652851817421792264075667042620142307802729186257790272289439619424700992746631622896250584548096824582933159250946847598453708100946519510377191277625544589168557475126447443206458585480637169041846670595981796181814690298257670272408946098343452830663299633204869299246099554534876351560995748018855854194272801636378569575e-320" },
	{ 72, "%.0g", 2.13700000000000002001e+300, "2e+300" },
	{ 73, "% .0g", 2.13700000000000002001e+300, " 2e+300" },
	{ 74, "%+.0g", 2.13700000000000002001e+300, "+2e+300" },
	{ 75, "%#.0g", 2.13700000000000002001e+300, "2.e+300" },
	{ 76, "%-.0g", 2.13700000000000002001e+300, "2e+300" },
	{ 77, "%0.0g", 2.13700000000000002001e+300, "2e+300" },
	{ 78, "%.1g", 2.13700000000000002001e+300, "2e+300" },
	{ 79, "% .1g", 2.13700000000000002001e+300, " 2e+300" },
	{ 80, "%+.1g", 2.13700000000000002001e+300, "+2e+300" },
	{ 81, "%#.1g", 2.13700000000000002001e+300, "2.e+300" },
	{ 82, "%-.1g", 2.13700000000000002001e+300, "2e+300" },
	{ 83, "%0.1g", 2.13700000000000002001e+300, "2e+300" },
	{ 84, "%.6g", 2.13700000000000002001e+300, "2.137e+300" },
	{ 85, "% .6g", 2.13700000000000002001e+300, " 2.137e+300" },
	{ 86, "%+.6g", 2.13700000000000002001e+300, "+2.137e+300" },
	{ 87, "%#.6g", 2.13700000000000002001e+300, "2.13700e+300" },
	{ 88, "%-.6g", 2.13700000000000002001e+300, "2.137e+300" },
	{ 89, "%0.6g", 2.13700000000000002001e+300, "2.137e+300" },
	{ 90, "%.400g", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 91, "% .400g", 2.13700000000000002001e+300, " 2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 92, "%+.400g", 2.13700000000000002001e+300, "+2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 93, "%#.400g", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 94, "%-.400g", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 95, "%0.400g", 2.13700000000000002001e+300, "2137000000000000020007624339749296178001574472534301385917047741966265391264441536807154884601845925660960897709179111096605297162000911011968635675105038939315507420031625694043551101876949964010314043336672913527808212880484741784519113084892599045175741730091660326398256647505161083658035112443904" },
	{ 96, "%.0g", -inf, "-inf" },
	{ 97, "% .0g", -inf, "-inf" },
	{ 98, "%+.0g", -inf, "-inf" },
	{ 99, "%#.0g", -inf, "-inf" },
	{ 100, "%-.0g", -inf, "-inf" },
	{ 101, "%0.0g", -inf, "-inf" },
	{ 102, "%.1g", -inf, "-inf" },
	{ 103, "% .1g", -inf, "-inf" },
	{ 104, "%+.1g", -inf, "-inf" },
	{ 105, "%#.1g", -inf, "-inf" },
	{ 106, "%-.1g", -inf, "-inf" },
	{ 107, "%0.1g", -inf, "-inf" },
	{ 108, "%.6g", -inf, "-inf" },
	{ 109, "% .6g", -inf, "-inf" },
	{ 110, "%+.6g", -inf, "-inf" },
	{ 111, "%#.6g", -inf, "-inf" },
	{ 112, "%-.6g", -inf, "-inf" },
	{ 113, "%0.6g", -inf, "-inf" },
	{ 114, "%.400g", -inf, "-inf" },
	{ 115, "% .400g", -inf, "-inf" },
	{ 116, "%+.400g", -inf, "-inf" },
	{ 117, "%#.400g", -inf, "-inf" },
	{ 118, "%-.400g", -inf, "-inf" },
	{ 119, "%0.400g", -inf, "-inf" },
	{ 120, "%.0g", -nan, "-nan" },
	{ 121, "% .0g", -nan, "-nan" },
	{ 122, "%+.0g", -nan, "-nan" },
	{ 123, "%#.0g", -nan, "-nan" },
	{ 124, "%-.0g", -nan, "-nan" },
	{ 125, "%0.0g", -nan, "-nan" },
	{ 126, "%.1g", -nan, "-nan" },
	{ 127, "% .1g", -nan, "-nan" },
	{ 128, "%+.1g", -nan, "-nan" },
	{ 129, "%#.1g", -nan, "-nan" },
	{ 130, "%-.1g", -nan, "-nan" },
	{ 131, "%0.1g", -nan, "-nan" },
	{ 132, "%.6g", -nan, "-nan" },
	{ 133, "% .6g", -nan, "-nan" },
	{ 134, "%+.6g", -nan, "-nan" },
	{ 135, "%#.6g", -nan, "-nan" },
	{ 136, "%-.6g", -nan, "-nan" },
	{ 137, "%0.6g", -nan, "-nan" },
	{ 138, "%.400g", -nan, "-nan" },
	{ 139, "% .400g", -nan, "-nan" },
	{ 140, "%+.400g", -nan, "-nan" },
	{ 141, "%#.400g", -nan, "-nan" },
	{ 142, "%-.400g", -nan, "-nan" },
	{ 143, "%0.400g", -nan, "-nan" },
	{ 144, "%.0g", -0.00000000000000000000e+00, "-0" },
	{ 145, "% .0g", -0.00000000000000000000e+00, "-0" },
	{ 146, "%+.0g", -0.00000000000000000000e+00, "-0" },
	{ 147, "%#.0g", -0.00000000000000000000e+00, "-0." },
	{ 148, "%-.0g", -0.00000000000000000000e+00, "-0" },
	{ 149, "%0.0g", -0.00000000000000000000e+00, "-0" },
	{ 150, "%.1g", -0.00000000000000000000e+00, "-0" },
	{ 151, "% .1g", -0.00000000000000000000e+00, "-0" },
	{ 152, "%+.1g", -0.00000000000000000000e+00, "-0" },
	{ 153, "%#.1g", -0.00000000000000000000e+00, "-0." },
	{ 154, "%-.1g", -0.00000000000000000000e+00, "-0" },
	{ 155, "%0.1g", -0.00000000000000000000e+00, "-0" },
	{ 156, "%.6g", -0.00000000000000000000e+00, "-0" },
	{ 157, "% .6g", -0.00000000000000000000e+00, "-0" },
	{ 158, "%+.6g", -0.00000000000000000000e+00, "-0" },
	{ 159, "%#.6g", -0.00000000000000000000e+00, "-0.00000" },
	{ 160, "%-.6g", -0.00000000000000000000e+00, "-0" },
	{ 161, "%0.6g", -0.00000000000000000000e+00, "-0" },
	{ 162, "%.400g", -0.00000000000000000000e+00, "-0" },
	{ 163, "% .400g", -0.00000000000000000000e+00, "-0" },
	{ 164, "%+.400g", -0.00000000000000000000e+00, "-0" },
	{ 165, "%#.400g", -0.00000000000000000000e+00, "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" },
	{ 166, "%-.400g", -0.00000000000000000000e+00, "-0" },
	{ 167, "%0.400g", -0.00000000000000000000e+00, "-0" },
};
static const struct test_double test_a[] = {
	{ 0, "%.0a", 9.99936943633530694875e-01, "0x2p-1" },
	{ 1, "% .0a", 9.99936943633530694875e-01, " 0x2p-1" },
	{ 2, "%+.0a", 9.99936943633530694875e-01, "+0x2p-1" },
	{ 3, "%#.0a", 9.99936943633530694875e-01, "0x2.p-1" },
	{ 4, "%-.0a", 9.99936943633530694875e-01, "0x2p-1" },
	{ 5, "%0.0a", 9.99936943633530694875e-01, "0x2p-1" },
	{ 6, "%.1a", 9.99936943633530694875e-01, "0x2.0p-1" },
	{ 7, "% .1a", 9.99936943633530694875e-01, " 0x2.0p-1" },
	{ 8, "%+.1a", 9.99936943633530694875e-01, "+0x2.0p-1" },
	{ 9, "%#.1a", 9.99936943633530694875e-01, "0x2.0p-1" },
	{ 10, "%-.1a", 9.99936943633530694875e-01, "0x2.0p-1" },
	{ 11, "%0.1a", 9.99936943633530694875e-01, "0x2.0p-1" },
	{ 12, "%.6a", 9.99936943633530694875e-01, "0x1.fff7bcp-1" },
	{ 13, "% .6a", 9.99936943633530694875e-01, " 0x1.fff7bcp-1" },
	{ 14, "%+.6a", 9.99936943633530694875e-01, "+0x1.fff7bcp-1" },
	{ 15, "%#.6a", 9.99936943633530694875e-01, "0x1.fff7bcp-1" },
	{ 16, "%-.6a", 9.99936943633530694875e-01, "0x1.fff7bcp-1" },
	{ 17, "%0.6a", 9.99936943633530694875e-01, "0x1.fff7bcp-1" },
	{ 18, "%.400a", 9.99936943633530694875e-01, "0x1.fff7bc2defb93000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1" },
	{ 19, "% .400a", 9.99936943633530694875e-01, " 0x1.fff7bc2defb93000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1" },
	{ 20, "%+.400a", 9.99936943633530694875e-01, "+0x1.fff7bc2defb93000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1" },
	{ 21, "%#.400a", 9.99936943633530694875e-01, "0x1.fff7bc2defb93000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1" },
	{ 22, "%-.400a", 9.99936943633530694875e-01, "0x1.fff7bc2defb93000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1" },
	{ 23, "%0.400a", 9.99936943633530694875e-01, "0x1.fff7bc2defb93000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1" },
	{ 24, "%.0a", -7.76639933231677154213e-02, "-0x1p-4" },
	{ 25, "% .0a", -7.76639933231677154213e-02, "-0x1p-4" },
	{ 26, "%+.0a", -7.76639933231677154213e-02, "-0x1p-4" },
	{ 27, "%#.0a", -7.76639933231677154213e-02, "-0x1.p-4" },
	{ 28, "%-.0a", -7.76639933231677154213e-02, "-0x1p-4" },
	{ 29, "%0.0a", -7.76639933231677154213e-02, "-0x1p-4" },
	{ 30, "%.1a", -7.76639933231677154213e-02, "-0x1.4p-4" },
	{ 31, "% .1a", -7.76639933231677154213e-02, "-0x1.4p-4" },
	{ 32, "%+.1a", -7.76639933231677154213e-02, "-0x1.4p-4" },
	{ 33, "%#.1a", -7.76639933231677154213e-02, "-0x1.4p-4" },
	{ 34, "%-.1a", -7.76639933231677154213e-02, "-0x1.4p-4" },
	{ 35, "%0.1a", -7.76639933231677154213e-02, "-0x1.4p-4" },
	{ 36, "%.6a", -7.76639933231677154213e-02, "-0x1.3e1c99p-4" },
	{ 37, "% .6a", -7.76639933231677154213e-02, "-0x1.3e1c99p-4" },
	{ 38, "%+.6a", -7.76639933231677154213e-02, "-0x1.3e1c99p-4" },
	{ 39, "%#.6a", -7.76639933231677154213e-02, "-0x1.3e1c99p-4" },
	{ 40, "%-.6a", -7.76639933231677154213e-02, "-0x1.3e1c99p-4" },
	{ 41, "%0.6a", -7.76639933231677154213e-02, "-0x1.3e1c99p-4" },
	{ 42, "%.400a", -7.76639933231677154213e-02, "-0x1.3e1c99766572d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-4" },
	{ 43, "% .400a", -7.76639933231677154213e-02, "-0x1.3e1c99766572d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-4" },
	{ 44, "%+.400a", -7.76639933231677154213e-02, "-0x1.3e1c99766572d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-4" },
	{ 45, "%#.400a", -7.76639933231677154213e-02, "-0x1.3e1c99766572d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-4" },
	{ 46, "%-.400a", -7.76639933231677154213e-02, "-0x1.3e1c99766572d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-4" },
	{ 47, "%0.400a", -7.76639933231677154213e-02, "-0x1.3e1c99766572d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-4" },
	{ 48, "%.0a", 2.13683391826339130356e-320, "0x0p-1022" },
	{ 49, "% .0a", 2.13683391826339130356e-320, " 0x0p-1022" },
	{ 50, "%+.0a", 2.13683391826339130356e-320, "+0x0p-1022" },
	{ 51, "%#.0a", 2.13683391826339130356e-320, "0x0.p-1022" },
	{ 52, "%-.0a", 2.13683391826339130356e-320, "0x0p-1022" },
	{ 53, "%0.0a", 2.13683391826339130356e-320, "0x0p-1022" },
	{ 54, "%.1a", 2.13683391826339130356e-320, "0x0.0p-1022" },
	{ 55, "% .1a", 2.13683391826339130356e-320, " 0x0.0p-1022" },
	{ 56, "%+.1a", 2.13683391826339130356e-320, "+0x0.0p-1022" },
	{ 57, "%#.1a", 2.13683391826339130356e-320, "0x0.0p-1022" },
	{ 58, "%-.1a", 2.13683391826339130356e-320, "0x0.0p-1022" },
	{ 59, "%0.1a", 2.13683391826339130356e-320, "0x0.0p-1022" },
	{ 60, "%.6a", 2.13683391826339130356e-320, "0x0.000000p-1022" },
	{ 61, "% .6a", 2.13683391826339130356e-320, " 0x0.000000p-1022" },
	{ 62, "%+.6a", 2.13683391826339130356e-320, "+0x0.000000p-1022" },
	{ 63, "%#.6a", 2.13683391826339130356e-320, "0x0.000000p-1022" },
	{ 64, "%-.6a", 2.13683391826339130356e-320, "0x0.000000p-1022" },
	{ 65, "%0.6a", 2.13683391826339130356e-320, "0x0.000000p-1022" },
	{ 66, "%.400a", 2.13683391826339130356e-320, "0x0.00000000010e5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1022" },
	{ 67, "% .400a", 2.13683391826339130356e-320, " 0x0.00000000010e5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1022" },
	{ 68, "%+.400a", 2.13683391826339130356e-320, "+0x0.00000000010e5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1022" },
	{ 69, "%#.400a", 2.13683391826339130356e-320, "0x0.00000000010e5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1022" },
	{ 70, "%-.400a", 2.13683391826339130356e-320, "0x0.00000000010e5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1022" },
	{ 71, "%0.400a", 2.13683391826339130356e-320, "0x0.00000000010e5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p-1022" },
	{ 72, "%.0a", 2.13700000000000002001e+300, "0x2p+997" },
	{ 73, "% .0a", 2.13700000000000002001e+300, " 0x2p+997" },
	{ 74, "%+.0a", 2.13700000000000002001e+300, "+0x2p+997" },
	{ 75, "%#.0a", 2.13700000000000002001e+300, "0x2.p+997" },
	{ 76, "%-.0a", 2.13700000000000002001e+300, "0x2p+997" },
	{ 77, "%0.0a", 2.13700000000000002001e+300, "0x2p+997" },
	{ 78, "%.1a", 2.13700000000000002001e+300, "0x1.ap+997" },
	{ 79, "% .1a", 2.13700000000000002001e+300, " 0x1.ap+997" },
	{ 80, "%+.1a", 2.13700000000000002001e+300, "+0x1.ap+997" },
	{ 81, "%#.1a", 2.13700000000000002001e+300, "0x1.ap+997" },
	{ 82, "%-.1a", 2.13700000000000002001e+300, "0x1.ap+997" },
	{ 83, "%0.1a", 2.13700000000000002001e+300, "0x1.ap+997" },
	{ 84, "%.6a", 2.13700000000000002001e+300, "0x1.98732ep+997" },
	{ 85, "% .6a", 2.13700000000000002001e+300, " 0x1.98732ep+997" },
	{ 86, "%+.6a", 2.13700000000000002001e+300, "+0x1.98732ep+997" },
	{ 87, "%#.6a", 2.13700000000000002001e+300, "0x1.98732ep+997" },
	{ 88, "%-.6a", 2.13700000000000002001e+300, "0x1.98732ep+997" },
	{ 89, "%0.6a", 2.13700000000000002001e+300, "0x1.98732ep+997" },
	{ 90, "%.400a", 2.13700000000000002001e+300, "0x1.98732da88aed1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+997" },
	{ 91, "% .400a", 2.13700000000000002001e+300, " 0x1.98732da88aed1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+997" },
	{ 92, "%+.400a", 2.13700000000000002001e+300, "+0x1.98732da88aed1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+997" },
	{ 93, "%#.400a", 2.13700000000000002001e+300, "0x1.98732da88aed1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+997" },
	{ 94, "%-.400a", 2.13700000000000002001e+300, "0x1.98732da88aed1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+997" },
	{ 95, "%0.400a", 2.13700000000000002001e+300, "0x1.98732da88aed1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+997" },
	{ 96, "%.0a", -inf, "-inf" },
	{ 97, "% .0a", -inf, "-inf" },
	{ 98, "%+.0a", -inf, "-inf" },
	{ 99, "%#.0a", -inf, "-inf" },
	{ 100, "%-.0a", -inf, "-inf" },
	{ 101, "%0.0a", -inf, "-inf" },
	{ 102, "%.1a", -inf, "-inf" },
	{ 103, "% .1a", -inf, "-inf" },
	{ 104, "%+.1a", -inf, "-inf" },
	{ 105, "%#.1a", -inf, "-inf" },
	{ 106, "%-.1a", -inf, "-inf" },
	{ 107, "%0.1a", -inf, "-inf" },
	{ 108, "%.6a", -inf, "-inf" },
	{ 109, "% .6a", -inf, "-inf" },
	{ 110, "%+.6a", -inf, "-inf" },
	{ 111, "%#.6a", -inf, "-inf" },
	{ 112, "%-.6a", -inf, "-inf" },
	{ 113, "%0.6a", -inf, "-inf" },
	{ 114, "%.400a", -inf, "-inf" },
	{ 115, "% .400a", -inf, "-inf" },
	{ 116, "%+.400a", -inf, "-inf" },
	{ 117, "%#.400a", -inf, "-inf" },
	{ 118, "%-.400a", -inf, "-inf" },
	{ 119, "%0.400a", -inf, "-inf" },
	{ 120, "%.0a", -nan, "-nan" },
	{ 121, "% .0a", -nan, "-nan" },
	{ 122, "%+.0a", -nan, "-nan" },
	{ 123, "%#.0a", -nan, "-nan" },
	{ 124, "%-.0a", -nan, "-nan" },
	{ 125, "%0.0a", -nan, "-nan" },
	{ 126, "%.1a", -nan, "-nan" },
	{ 127, "% .1a", -nan, "-nan" },
	{ 128, "%+.1a", -nan, "-nan" },
	{ 129, "%#.1a", -nan, "-nan" },
	{ 130, "%-.1a", -nan, "-nan" },
	{ 131, "%0.1a", -nan, "-nan" },
	{ 132, "%.6a", -nan, "-nan" },
	{ 133, "% .6a", -nan, "-nan" },
	{ 134, "%+.6a", -nan, "-nan" },
	{ 135, "%#.6a", -nan, "-nan" },
	{ 136, "%-.6a", -nan, "-nan" },
	{ 137, "%0.6a", -nan, "-nan" },
	{ 138, "%.400a", -nan, "-nan" },
	{ 139, "% .400a", -nan, "-nan" },
	{ 140, "%+.400a", -nan, "-nan" },
	{ 141, "%#.400a", -nan, "-nan" },
	{ 142, "%-.400a", -nan, "-nan" },
	{ 143, "%0.400a", -nan, "-nan" },
	{ 144, "%.0a", -0.00000000000000000000e+00, "-0x0p+0" },
	{ 145, "% .0a", -0.00000000000000000000e+00, "-0x0p+0" },
	{ 146, "%+.0a", -0.00000000000000000000e+00, "-0x0p+0" },
	{ 147, "%#.0a", -0.00000000000000000000e+00, "-0x0.p+0" },
	{ 148, "%-.0a", -0.00000000000000000000e+00, "-0x0p+0" },
	{ 149, "%0.0a", -0.00000000000000000000e+00, "-0x0p+0" },
	{ 150, "%.1a", -0.00000000000000000000e+00, "-0x0.0p+0" },
	{ 151, "% .1a", -0.00000000000000000000e+00, "-0x0.0p+0" },
	{ 152, "%+.1a", -0.00000000000000000000e+00, "-0x0.0p+0" },
	{ 153, "%#.1a", -0.00000000000000000000e+00, "-0x0.0p+0" },
	{ 154, "%-.1a", -0.00000000000000000000e+00, "-0x0.0p+0" },
	{ 155, "%0.1a", -0.00000000000000000000e+00, "-0x0.0p+0" },
	{ 156, "%.6a", -0.00000000000000000000e+00, "-0x0.000000p+0" },
	{ 157, "% .6a", -0.00000000000000000000e+00, "-0x0.000000p+0" },
	{ 158, "%+.6a", -0.00000000000000000000e+00, "-0x0.000000p+0" },
	{ 159, "%#.6a", -0.00000000000000000000e+00, "-0x0.000000p+0" },
	{ 160, "%-.6a", -0.00000000000000000000e+00, "-0x0.000000p+0" },
	{ 161, "%0.6a", -0.00000000000000000000e+00, "-0x0.000000p+0" },
	{ 162, "%.400a", -0.00000000000000000000e+00, "-0x0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+0" },
	{ 163, "% .400a", -0.00000000000000000000e+00, "-0x0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+0" },
	{ 164, "%+.400a", -0.00000000000000000000e+00, "-0x0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+0" },
	{ 165, "%#.400a", -0.00000000000000000000e+00, "-0x0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+0" },
	{ 166, "%-.400a", -0.00000000000000000000e+00, "-0x0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+0" },
	{ 167, "%0.400a", -0.00000000000000000000e+00, "-0x0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000p+0" },
};
static const struct test_double test_bigtypes[] = {
	{ 0, "%F", inf, "INF" },
	{ 1, "%F", nan, "NAN" },
	{ 2, "%G", inf, "INF" },
	{ 3, "%G", nan, "NAN" },
	{ 4, "%G", 2.137e+300, "2.137E+300" },
	{ 5, "%E", inf, "INF" },
	{ 6, "%E", nan, "NAN" },
	{ 7, "%E", 2.137000e+300, "2.137000E+300" },
	{ 8, "%A", inf, "INF" },
	{ 9, "%A", nan, "NAN" },
	{ 10, "%.6A", 0x1.abcdefp-6, "0X1.ABCDEFP-6" },
};


TEST_GROUP(sprintf_formatting);

TEST_SETUP(sprintf_formatting)
{
	/* Empty */
}


TEST_TEAR_DOWN(sprintf_formatting)
{
	/* Empty */
}


TEST(sprintf_formatting, format_f)
{
	for (size_t i = 0; i < sizeof(test_f) / sizeof(*test_f); ++i) {
		MY_RUN_TEST(test_f[i].format, test_f[i].value, test_f[i].result, test_f[i].id);
	}
}

TEST(sprintf_formatting, format_e)
{
	for (size_t i = 0; i < sizeof(test_e) / sizeof(*test_e); ++i) {
		MY_RUN_TEST(test_e[i].format, test_e[i].value, test_e[i].result, test_e[i].id);
	}
}

TEST(sprintf_formatting, format_g)
{
	for (size_t i = 0; i < sizeof(test_g) / sizeof(*test_g); ++i) {
		MY_RUN_TEST(test_g[i].format, test_g[i].value, test_g[i].result, test_g[i].id);
	}
}

TEST(sprintf_formatting, format_a)
{
	for (size_t i = 0; i < sizeof(test_a) / sizeof(*test_a); ++i) {
		MY_RUN_TEST(test_a[i].format, test_a[i].value, test_a[i].result, test_a[i].id);
	}
}

TEST(sprintf_formatting, format_FEGA)
{
	for (size_t i = 0; i < sizeof(test_bigtypes) / sizeof(*test_bigtypes); ++i) {
		MY_RUN_TEST(test_bigtypes[i].format, test_bigtypes[i].value, test_bigtypes[i].result, test_bigtypes[i].id);
	}
}


TEST_GROUP_RUNNER(sprintf_format)
{
	RUN_TEST_CASE(sprintf_formatting, format_f);
	RUN_TEST_CASE(sprintf_formatting, format_e);
	RUN_TEST_CASE(sprintf_formatting, format_g);
	RUN_TEST_CASE(sprintf_formatting, format_a);
	RUN_TEST_CASE(sprintf_formatting, format_FEGA);
}
